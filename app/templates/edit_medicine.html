{% extends 'layout.html' %}

{% block content %}
<div class="container">
    <h2>Edit Medicine</h2>

    <form method="POST" action="{{ url_for('medicines.edit_medicine', medicine_id=medicine.id) }}">
        {{ form.hidden_tag() }}  <!-- CSRF token -->

        <!-- Name Field -->
        <div class="form-group">
            {{ form.name.label(class="form-label") }}
            {{ form.name(class="form-control", placeholder="Enter medicine name") }}
        </div>

        <!-- Dosage Field -->
        <div class="form-group">
            {{ form.dosage.label(class="form-label") }}
            {{ form.dosage(class="form-control", placeholder="Enter dosage") }}
        </div>

        <!-- Frequency Field -->
        <div class="form-group">
            {{ form.frequency.label(class="form-label") }}
            {{ form.frequency(class="form-control", placeholder="Enter frequency") }}
        </div>

        <!-- Notes Field -->
        <div class="form-group">
            {{ form.notes.label(class="form-label") }}
            {{ form.notes(class="form-control", rows=4, placeholder="Enter any additional notes") }}
        </div>

        <!-- Reminder Time Field (only if reminder exists) -->
        {% if user_medicine.reminders %}
        <div class="form-group">
            {{ form.reminder_time.label(class="form-label") }}
            {% if form.reminder_time.data %}
                <input type="datetime-local" class="form-control" name="reminder_time" value="{{ form.reminder_time.data.strftime('%Y-%m-%dT%H:%M') }}" />
            {% else %}
                <input type="datetime-local" class="form-control" name="reminder_time" value="" />
            {% endif %}
        </div>

        <!-- Reminder Message Field -->
        <div class="form-group">
            {{ form.reminder_message.label(class="form-label") }}
            {{ form.reminder_message(class="form-control", placeholder="Enter reminder message") }}
        </div>

        <!-- Status Field -->
        <div class="form-group">
            {{ form.status.label(class="form-label") }}
            {{ form.status(class="form-control") }}
        </div>

        {% else %}
        <p>No reminders set for this medicine.</p>
        {% endif %}  

        <!-- Submit Button -->
        <div class="form-group d-flex justify-content-between align-items-center">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <a href="{{ url_for('medicines.my_medicine') }}" class="btn btn-link">Back to Medicines List</a>
        </div>
    </form>
</div>
{% endblock %}
